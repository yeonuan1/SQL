04-2. 두 테이블을 묶는 조인
==========================

- join : 두 테이블을 서로 묶어 하나의 결과를 만드는 것.
  - 회원 테이블과 구매 테이블을 합쳐 배송 정보 테이블을 만들 수 있음

# 내부 조인

### 일대다(one to many) 관계의 이해 
- 한쪽 테이블에는 하나의 값만 존재해야 하지만, 연결된 다른 테이블에는 여러 값이 존재할 수 있는 관계
- 두 테이블의 조인을 위해서는 기본키(PK)-외래키(FK) 관계로 맺어져 있어야 함.

### 내부 조인의 기본
- 테이블 조인에 가장 많이 사용됨

        SELECT <열 목록>
        FROM <첫 번째 테이블>
            INNER JOIN <두 번째 테이블>
            ON <조인될 조건>
        [WHERE 검색 조건];

- ex. GRL 아이디를 가진 사람이 구매한 물건 정보와 회원 정보를 알기 위해 buy에 member를 조인하려고 함.
  - buy 테이블에서 GRL 아이디를 추출
  - GRL과 동일한 값을 member 테이블에서 검색
  - 찾으면 두 행을 결합


### 내부 조인의 간결한 표현
- 조인 시 각 열이 어떤 테이블 소속인지를 명확히 하기 위해 **테이블_이름.칼럼** 형식으로 지정할 수 있음
  - 그러나 코드가 복잡해진다는 단점이 있어 별칭(alias)을 사용해 간결히 표현할 수 있음

        SELECT B.mem_id, M.mem_name, B.prod_name, M.addr, CONCAT(M.phone1, M.phone2) '연락처'
        FROM buy B
            INNER JOIN member M
            ON B.mem_id = M.mem_id;


### 내부 조인의 활용
- 내부 조인은 두 테이블 모두에 있는 내용만 조회할 수 있음
  - 양 테이블 중 하나라도 내용이 있을 때 조인하려면 외부 조인을 사용해야 함.


# 외부 조인
- 두 테이블 중 한 쪽에만 데이터가 있어도 결과가 나옴

### 외부 조인의 기본

        SELECT <열 목록>
        FROM <1st테이블(LEFT 테이블)>
            <LEFT|RIGHT|FULL> OUTER JOIN <2nd테이블(RIGHT 테이블)>
            ON <조인될 조건>
        [WHERE 검색 조건];
- LEFT OUTER JOIN문은 왼쪽 테이블의 내용은 모두 출력되어야 한다는 의미임.

### 외부 조인의 활용
- IS NULL 구문은 WHERE문에서 각 행의 값이 NULL 값인지 비교한다.


# 기타 조인


### 상호 조인(cross join)
- 한 쪽 테이블의 모든 행과 다른 쪽 테이블의 모든 행을 조인시킴
- 상호 조인 후 전체 행 개수는 두 테이블의 행 개수를 곱한 개수
- 특징
  - ON 구문 사용 불가
  - 랜덤으로 조인하기 때문에 결과 내용은 의미가 없음
  - 주 용도 : 테스트 목적으로 대용량 데이터 생성
- 대용량 테이블 만들기 : **CREATE TABLE ~ SELECT**

### 자체 조인(self join)
- 자기 자신과 조인 -> 1개의 테이블만 사용
- 직원 조직도와 같이 한 테이블 내에서 한 열에서 얻을 수 없는 정보가 다른 열에 존재할 때 사용할 수 있음
  
        SELECT <열 목록>
        FROM <테이블> 별칭A
            INNER JOIN <테이블> 별칭B
            ON <조인될 조건>
        [WHERE 검색 조건];


